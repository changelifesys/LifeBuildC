(function(t){function e(e){for(var s,i,r=e[0],l=e[1],c=e[2],f=0,p=[];f<r.length;f++)i=r[f],a[i]&&p.push(a[i][0]),a[i]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,r=1;r<n.length;r++){var l=n[r];0!==a[l]&&(s=!1)}s&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={1:0},o=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([3,0]),n()})({"0Ymv":function(t,e,n){t.exports=n.p+"img/title.eb480c91.jpg"},"2fKa":function(t,e,n){},3:function(t,e,n){t.exports=n("Vtdi")},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var s=n("Kw5r"),a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.pageLoading,expression:"pageLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[s("section",[s("header",{staticClass:"alignCenter"},[s("img",{attrs:{src:n("0Ymv"),id:"main-img"}}),s("h1",[t._v("生命建造程序")]),s("h3",[t._v(t._s(t.className))])]),t.className&&"form"===t.showBlock?s("registration-form",{attrs:{subInfo:t.subInfo,groupData:t.groupData},on:{onSignSuccess:function(e){t.onSignSuccess(e)}}}):t._e(),t.signData&&"signInfo"===t.showBlock?s("sign-info",{attrs:{signData:t.signData},on:{reSignUp:function(e){t.reSignUp(e)}}}):t._e()],1)])},o=[],i=(n("KKXr"),n("OG14"),n("vDqi")),r=n.n(i),l=n("cr+I"),c=n.n(l),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("el-col",{attrs:{span:12,offset:6,xs:{span:19,offset:3}}},[n("div",{staticClass:"class-info"},[n("el-alert",{attrs:{type:"info",title:"",description:"本表個人資料將作建檔處理，並於日後會務活動運作之目的內，由教會及同工作為聯絡通訊、關懷及相關合理運用。我們會盡善良管理人責任，妥善保管資料，避免外洩或不當用途之使用。",closable:!1}}),n("ul",{staticClass:"class-detail"},[n("li",[n("div",{staticClass:"class-detail-title"},[t._v("報名條件：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.condition))])]),n("li",[n("div",{staticClass:"class-detail-title"},[t._v("上課日期：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.date))])]),n("li",[n("div",{staticClass:"class-detail-title"},[t._v("地點：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.location))])]),n("li",[n("div",{staticClass:"class-detail-title"},[t._v("報名日期：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.endDate))])])])],1),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":t.labelPosition,"label-width":"105px"},nativeOn:{submit:function(e){return e.preventDefault(),t.checkEnter(e)}}},[n("el-form-item",{attrs:{label:"組別",prop:"gcroup"}},[n("el-select",{on:{change:t.onGcroupChange},model:{value:t.form.gcroup,callback:function(e){t.$set(t.form,"gcroup",e)},expression:"form.gcroup"}},t._l(t.groupData,function(e){return n("el-option",{key:e.group,attrs:{value:e.group}},[t._v(t._s(e.group))])}))],1),n("el-form-item",{attrs:{label:"小組",prop:"group"}},[n("el-select",{model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}},t._l(t.groupList,function(e){return n("el-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"手機",prop:"phone"}},[n("el-input",{attrs:{type:"number"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),n("el-form-item",[n("el-button",{attrs:{size:"small",type:"primary",loading:t.sending},on:{click:function(e){t.submitForm("form")}}},[t._v("報名")]),n("el-button",{attrs:{size:"small",disabled:t.sending},on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)],1)],1)},f=[],p=(n("f3/d"),n("LvDl")),g="/api/",d="".concat(g,"GetSUBInfo.aspx"),m="".concat(g,"GetGroupItem.aspx"),h="".concat(g,"AddSubSign.aspx"),v={data:function(){return{labelPosition:"right",form:{gcroup:"",group:"",name:"",phone:""},rules:{gcroup:[{required:!0,message:"請選擇組別",trigger:"change"}],group:[{required:!0,message:"請選擇小組",trigger:"change"}],name:[{required:!0,message:"請輸入名字",trigger:"blur"}],phone:[{required:!0,message:"請輸入手機",trigger:"blur"},{validator:function(t,e,n){var s=/^[09]{2}[0-9]{8}$/;s.test(e)?n():n(new Error("請輸入正確手機格式"))},trigger:"blur"}]},sending:!1}},props:{subInfo:{type:Object,required:!0},groupData:{type:Array,required:!0}},computed:{groupList:function(){var t=Object(p["find"])(this.groupData,{group:this.form.gcroup});return Object(p["get"])(t,"list",[])}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var n=e;e.sending=!0,r.a.post(h,{SID:e.subInfo.sid,CategoryID:e.subInfo.categoryID,gcroup:e.form.gcroup,group:e.form.group,Ename:e.form.name,Phone:e.form.phone,Gmail:"",Church:""}).then(function(t){n.sending=!1;var e=t.data,s=e.IsApiError,a=e.ApiMsg;s?n.$message({message:a,type:"error"}):(n.resetForm("form"),n.$emit("onSignSuccess",t.data))}).catch(function(t){n.sending=!1,n.$message({message:"發送發生錯誤，請稍後再試",type:"error"})})})},resetForm:function(t){this.$refs[t].resetFields()},onGcroupChange:function(){this.form.group=""},onResize:function(){this.labelPosition=window.innerWidth<=768?"top":"right"}},mounted:function(){window.addEventListener("resize",this.onResize),this.onResize()},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)}},b=v,_=(n("rfga"),n("KHd+")),I=Object(_["a"])(b,u,f,!1,null,null,null),D=I.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("el-col",{attrs:{span:12,offset:6,xs:{span:19,offset:3}}},[n("div",{staticClass:"class-info alignCenter"},[n("h2",{staticClass:"status-success"},[n("i",{staticClass:"el-icon-success"}),t._v(" "+t._s(t.signData.ApiMsg))]),n("ul",{staticClass:"class-detail inlineBlock alignLeft"},[n("li",[n("span",{staticClass:"class-detail-title"},[t._v("組別：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.gcroup))])]),n("li",[n("span",{staticClass:"class-detail-title"},[t._v("小組：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.group))])]),n("li",[n("span",{staticClass:"class-detail-title"},[t._v("姓名：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.Ename))])]),n("li",[n("span",{staticClass:"class-detail-title"},[t._v("手機：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.Phone))])])]),n("br"),n("br"),n("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:function(e){t.$emit("reSignUp")}}},[t._v("重新報名")]),n("br"),n("br")],1)])],1)},w=[],x={props:{signData:{type:Object,required:!0}}},y=x,S=Object(_["a"])(y,C,w,!1,null,null,null),k=S.exports,L={name:"app",data:function(){return{showBlock:"form",className:"",subInfo:{condition:"",date:"",endDate:"",location:"",name:"",categoryID:""},signData:null,groupData:[],getSubInfoLoading:!0,getGroupItemLoading:!0}},components:{registrationForm:D,signInfo:k},computed:{pageLoading:function(){return this.getSubInfoLoading||this.getGroupItemLoading}},methods:{showWarning:function(t){this.$alert(t,{type:"error",showClose:!1,showConfirmButton:!1,center:!0})},onSignSuccess:function(t){this.signData=t,this.showBlock="signInfo"},reSignUp:function(){this.signData=null,this.showBlock="form"}},created:function(){var t=this,e=c.a.parse(window.location.search),n=e.id;n?(r.a.post(d,{CategoryID:n.toUpperCase()}).then(function(e){var n=e.data,s=n.SUCondition,a=n.SubDate,o=n.SubEndDate,i=n.SubLocation,r=n.IsApiError,l=n.ApiMsg,c=n.SubName,u=n.CategoryID,f=n.SID;r?t.showWarning(l):(t.className=c.split("生命建造程序 ")[1],t.subInfo.condition=s,t.subInfo.date=a,t.subInfo.endDate=o,t.subInfo.location=i,t.subInfo.categoryID=u,t.subInfo.sid=f,t.getSubInfoLoading=!1)}).catch(function(e){t.showWarning("很抱歉！我們的服務發生了問題")}),r.a.get(m).then(function(e){t.groupData=e.data.DataInfo,t.getGroupItemLoading=!1}).catch(function(e){t.showWarning("很抱歉！我們的服務發生了問題")})):this.showWarning("查無課程資訊")}},$=L,O=Object(_["a"])($,a,o,!1,null,null,null),j=O.exports,E=n("XJYT"),q=n.n(E),z=n("yHtJ"),G=n.n(z);n("iqH7"),n("eKdF");s["default"].use(q.a,{locale:G.a}),s["default"].config.productionTip=!1,new s["default"]({render:function(t){return t(j)}}).$mount("#app")},eKdF:function(t,e,n){},iqH7:function(t,e,n){},rfga:function(t,e,n){"use strict";var s=n("2fKa"),a=n.n(s);a.a}});
//# sourceMappingURL=app.ee2aa77d.js.map