(function(e){function t(t){for(var o,i,a=t[0],c=t[1],l=t[2],p=0,f=[];p<a.length;p++)i=a[p],s[i]&&f.push(s[i][0]),s[i]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(o=!1)}o&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var o={},s={1:0},r=[];function i(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=o,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var l=0;l<a.length;l++)t(a[l]);var u=c;r.push([3,0]),n()})({"0Ymv":function(e,t,n){e.exports=n.p+"img/title.eb480c91.jpg"},"2fKa":function(e,t,n){},3:function(e,t,n){e.exports=n("Vtdi")},Vtdi:function(e,t,n){"use strict";n.r(t);n("VRzm");var o=n("Kw5r"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:e.pageLoading,expression:"pageLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[o("section",[o("header",{staticClass:"alignCenter"},[o("img",{attrs:{src:n("0Ymv"),id:"main-img"}}),o("h1",[e._v("生命建造程序")]),o("h3",[e._v(e._s(e.className))])]),e.className&&"form"===e.showBlock?o("registration-form",{attrs:{subInfo:e.subInfo,groupData:e.groupData},on:{onSignSuccess:function(t){e.onSignSuccess(t)}}}):e._e(),e.signData&&"signInfo"===e.showBlock?o("sign-info",{attrs:{signData:e.signData},on:{reSignUp:function(t){e.reSignUp(t)}}}):e._e()],1)])},r=[],i=(n("KKXr"),n("OG14"),n("vDqi")),a=n.n(i),c=n("cr+I"),l=n.n(c),u=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("el-col",{attrs:{span:12,offset:6,xs:{span:19,offset:3}}},[n("div",{domProps:{innerHTML:e._s(e.subInfo.HtmlSubDesc)}}),n("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-position":e.labelPosition,"label-width":"105px"},nativeOn:{submit:function(t){return t.preventDefault(),e.checkEnter(t)}}},[n("el-form-item",{attrs:{label:"組別",prop:"gcroup"}},[n("el-select",{on:{change:e.onGcroupChange},model:{value:e.form.gcroup,callback:function(t){e.$set(e.form,"gcroup",t)},expression:"form.gcroup"}},e._l(e.groupData,function(t){return n("el-option",{key:t.group,attrs:{value:t.group}},[e._v(e._s(t.group))])}))],1),n("el-form-item",{attrs:{label:"小組",prop:"group"}},[n("el-select",{model:{value:e.form.group,callback:function(t){e.$set(e.form,"group",t)},expression:"form.group"}},e._l(e.groupList,function(t){return n("el-option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name","string"===typeof t?t.trim():t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"手機",prop:"phone"}},[n("el-input",{attrs:{type:"number"},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1),n("el-form-item",{attrs:{label:"Email",prop:"email"}},[n("el-input",{attrs:{type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email","string"===typeof t?t.trim():t)},expression:"form.email"}})],1),n("el-form-item",{attrs:{label:"",prop:"cacheInfo"}},[n("el-checkbox-group",{model:{value:e.form.cacheInfo,callback:function(t){e.$set(e.form,"cacheInfo",t)},expression:"form.cacheInfo"}},[n("el-checkbox",{attrs:{label:"記住我的資訊",name:"cacheInfo"}})],1)],1),n("el-form-item",[n("el-button",{attrs:{size:"small",type:"primary",loading:e.sending},on:{click:function(t){e.checkForm("form")}}},[e._v("報名")]),n("el-button",{attrs:{size:"small",disabled:e.sending},on:{click:function(t){e.resetForm("form")}}},[e._v("重置")])],1)],1)],1)],1)},p=[],f=(n("f3/d"),n("ls82"),n("MECJ")),g=n("LvDl"),m="/api/",h="".concat(m,"GetSUBInfo.aspx"),d="".concat(m,"GetGroupItem.aspx"),b="".concat(m,"AddSubSign.aspx"),v="".concat(m,"ChkMember.aspx"),I={data:function(){return{labelPosition:"right",form:{gcroup:"",group:"",name:"",phone:"",email:"",cacheInfo:!0,mid:"",dataChangeMsg:[]},rules:{gcroup:[{required:!0,message:"請選擇組別",trigger:"change"}],group:[{required:!0,message:"請選擇小組",trigger:"change"}],name:[{required:!0,message:"請輸入名字",trigger:"blur"}],phone:[{required:!0,message:"請輸入手機",trigger:"blur"},{validator:function(e,t,n){var o=/^[09]{2}[0-9]{8}$/;o.test(t)?n():n(new Error("請輸入正確手機格式"))},trigger:"blur"}]},sending:!1}},props:{subInfo:{type:Object,required:!0},groupData:{type:Array,required:!0}},computed:{groupList:function(){var e=Object(g["find"])(this.groupData,{group:this.form.gcroup});return Object(g["get"])(e,"list",[])}},methods:{checkForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.sending=!0,t.checkMember()})},checkMember:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t,n,o,s,r,i,c,l,u=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.post(v,{group:this.form.group,Ename:this.form.name,Phone:this.form.phone,SID:this.subInfo.sid});case 3:t=e.sent,n=t.data,o=n.IsChgShow,s=n.ApiTitle,r=n.DataChangeMsg,i=n.MID,c=this.$createElement,o?(l=[],r.map(function(e){return l.push(c("li",null,e)),e}),this.$msgbox({title:s,message:c("ul",null,l),confirmButtonText:"我要更新資料＋報名",showCancelButton:!0,cancelButtonText:"重新填寫",beforeClose:function(e,t,n){"confirm"===e?(u.form.mid=i,u.form.dataChangeMsg=r,u.submitForm(),n()):(u.resetForm("form"),u.sending=!1,n())}})):(this.form.mid=i,this.form.dataChangeMsg=r,this.submitForm()),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),this.sending=!1,this.$message({message:"發送發生錯誤，請稍後再試",type:"error"});case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),submitForm:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t,n,o,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a.a.post(b,{DataChangeMsg:this.form.dataChangeMsg,MID:this.form.mid,SID:this.subInfo.sid,CategoryID:this.subInfo.categoryID,gcroup:this.form.gcroup,group:this.form.group,Ename:this.form.name,Phone:this.form.phone,Gmail:this.form.email,Church:""});case 3:t=e.sent,this.sending=!1,n=t.data,o=n.IsApiError,s=n.ApiMsg,o?this.$message({message:s,type:"error"}):(this.form.cacheInfo?(r=new Date,r.setDate(r.getDate()+360),this.$cookie.set("clc-sign-gcroup",this.form.gcroup,{expires:r}),this.$cookie.set("clc-sign-group",this.form.group,{expires:r}),this.$cookie.set("clc-sign-name",this.form.name,{expires:r}),this.$cookie.set("clc-sign-phone",this.form.phone,{expires:r})):(this.$cookie.delete("clc-sign-gcroup"),this.$cookie.delete("clc-sign-group"),this.$cookie.delete("clc-sign-name"),this.$cookie.delete("clc-sign-phone")),this.resetForm("form"),this.$emit("onSignSuccess",t.data)),e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),this.sending=!1,this.$message({message:"發送發生錯誤，請稍後再試",type:"error"});case 13:case"end":return e.stop()}},e,this,[[0,9]])}));return function(){return e.apply(this,arguments)}}(),resetForm:function(e){this.$refs[e].resetFields()},onGcroupChange:function(){this.form.group=""},onResize:function(){this.labelPosition=window.innerWidth<=768?"top":"right"}},mounted:function(){window.addEventListener("resize",this.onResize),this.onResize(),this.form.gcroup=this.$cookie.get("clc-sign-gcroup")||"",this.form.group=this.$cookie.get("clc-sign-group")||"",this.form.name=this.$cookie.get("clc-sign-name")||"",this.form.phone=this.$cookie.get("clc-sign-phone")||""},beforeDestroy:function(){window.removeEventListener("resize",this.onResize)}},D=I,k=(n("rfga"),n("KHd+")),w=Object(k["a"])(D,u,p,!1,null,null,null),x=w.exports,_=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-main",[n("el-col",{attrs:{span:12,offset:6,xs:{span:19,offset:3}}},[n("div",{staticClass:"class-info alignCenter"},[n("h2",{staticClass:"status-success"},[n("i",{staticClass:"el-icon-success"}),e._v(" "+e._s(e.signData.ApiMsg))]),n("ul",{staticClass:"class-detail inlineBlock alignLeft"},[n("li",[n("span",{staticClass:"class-detail-title"},[e._v("組別：")]),n("span",{staticClass:"class-detail-text"},[e._v(e._s(e.signData.gcroup))])]),n("li",[n("span",{staticClass:"class-detail-title"},[e._v("小組：")]),n("span",{staticClass:"class-detail-text"},[e._v(e._s(e.signData.group))])]),n("li",[n("span",{staticClass:"class-detail-title"},[e._v("姓名：")]),n("span",{staticClass:"class-detail-text"},[e._v(e._s(e.signData.Ename))])]),n("li",[n("span",{staticClass:"class-detail-title"},[e._v("手機：")]),n("span",{staticClass:"class-detail-text"},[e._v(e._s(e.signData.Phone))])])]),n("br"),n("br"),n("el-button",{attrs:{size:"small",icon:"el-icon-refresh"},on:{click:function(t){e.$emit("reSignUp")}}},[e._v("重新報名")]),n("br"),n("br")],1)])],1)},C=[],y={props:{signData:{type:Object,required:!0}}},S=y,$=Object(k["a"])(S,_,C,!1,null,null,null),M=$.exports,O={name:"app",data:function(){return{showBlock:"form",className:"",subInfo:{condition:"",date:"",endDate:"",location:"",name:"",categoryID:"",HtmlSubDesc:""},signData:null,groupData:[],getSubInfoLoading:!0,getGroupItemLoading:!0}},components:{registrationForm:x,signInfo:M},computed:{pageLoading:function(){return this.getSubInfoLoading||this.getGroupItemLoading}},methods:{showWarning:function(e){this.$alert(e,{type:"error",showClose:!1,showConfirmButton:!1,center:!0})},onSignSuccess:function(e){this.signData=e,this.showBlock="signInfo"},reSignUp:function(){this.signData=null,this.showBlock="form"}},created:function(){var e=this,t=l.a.parse(window.location.search),n=t.id;n?(a.a.post(h,{CategoryID:n.toUpperCase(),PageName:"SubjectSignUp"}).then(function(t){var n=t.data,o=n.SUCondition,s=n.SubDate,r=n.SubEndDate,i=n.SubLocation,a=n.IsApiError,c=n.ApiMsg,l=n.SubName,u=n.CategoryID,p=n.SID,f=n.HtmlSubDesc;a?e.showWarning(c):(e.className=l.split("生命建造程序 ")[1],e.subInfo.condition=o,e.subInfo.date=s,e.subInfo.endDate=r,e.subInfo.location=i,e.subInfo.categoryID=u,e.subInfo.sid=p,e.getSubInfoLoading=!1,e.subInfo.HtmlSubDesc=f)}).catch(function(t){e.showWarning("很抱歉！我們的服務發生了問題")}),a.a.post(d,{CategoryID:n.toUpperCase()}).then(function(t){e.groupData=t.data.DataInfo,e.getGroupItemLoading=!1}).catch(function(t){e.showWarning("很抱歉！我們的服務發生了問題")})):this.showWarning("查無課程資訊")}},L=O,E=Object(k["a"])(L,s,r,!1,null,null,null),j=E.exports,F=n("XJYT"),P=n.n(F),B=n("AOfK"),q=n.n(B),z=n("yHtJ"),G=n.n(z);n("iqH7"),n("eKdF");o["default"].use(P.a,{locale:G.a}),o["default"].use(q.a),o["default"].config.productionTip=!1,new o["default"]({render:function(e){return e(j)}}).$mount("#app")},eKdF:function(e,t,n){},iqH7:function(e,t,n){},rfga:function(e,t,n){"use strict";var o=n("2fKa"),s=n.n(o);s.a}});
//# sourceMappingURL=app.1bcae291.js.map