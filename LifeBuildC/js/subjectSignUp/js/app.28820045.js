(function(t){function e(e){for(var s,r,i=e[0],l=e[1],c=e[2],p=0,f=[];p<i.length;p++)r=i[p],a[r]&&f.push(a[r][0]),a[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],s=!0,i=1;i<n.length;i++){var l=n[i];0!==a[l]&&(s=!1)}s&&(o.splice(e--,1),t=r(r.s=n[0]))}return t}var s={},a={1:0},o=[];function r(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=s,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([2,0]),n()})({2:function(t,e,n){t.exports=n("Vtdi")},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var s=n("Kw5r"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.pageLoading,expression:"pageLoading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"app"}},[n("section",[n("header",{staticClass:"alignCenter"},[n("div",{attrs:{id:"main-background"}}),n("h1",[t._v("生命建造程序")]),n("h3",[t._v(t._s(t.className))])]),t.className&&"form"===t.showBlock?n("registration-form",{attrs:{subInfo:t.subInfo,groupData:t.groupData},on:{onSignSuccess:function(e){t.onSignSuccess(e)}}}):t._e(),t.signData&&"signInfo"===t.showBlock?n("sign-info",{attrs:{signData:t.signData},on:{reSignUp:function(e){t.reSignUp(e)}}}):t._e()],1)])},o=[],r=(n("KKXr"),n("OG14"),n("vDqi")),i=n.n(r),l=n("cr+I"),c=n.n(l),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("div",{staticClass:"class-info"},[n("el-alert",{attrs:{type:"info",title:"",description:"本表個人資料將作建檔處理，並於日後會務活動運作之目的內，由教會及同工作為聯絡通訊、關懷及相關合理運用。我們會盡善良管理人責任，妥善保管資料，避免外洩或不當用途之使用。",closable:!1,"show-icon":""}}),n("ul",{staticClass:"class-detail"},[n("li",[n("div",{staticClass:"class-detail-title"},[t._v("報名條件：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.condition))])]),n("li",[n("div",{staticClass:"class-detail-title"},[t._v("上課日期：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.date))])]),n("li",[n("div",{staticClass:"class-detail-title"},[t._v("地點：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.location))])]),n("li",[n("div",{staticClass:"class-detail-title"},[t._v("報名日期：")]),n("div",{staticClass:"class-detail-text"},[t._v(t._s(t.subInfo.endDate))])])])],1),n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.checkEnter(e)}}},[n("el-form-item",{attrs:{label:"組別",prop:"gcroup"}},[n("el-select",{on:{change:t.onGcroupChange},model:{value:t.form.gcroup,callback:function(e){t.$set(t.form,"gcroup",e)},expression:"form.gcroup"}},t._l(t.groupData,function(e){return n("el-option",{key:e.group,attrs:{value:e.group}},[t._v(t._s(e.group))])}))],1),n("el-form-item",{attrs:{label:"小組",prop:"group"}},[n("el-select",{model:{value:t.form.group,callback:function(e){t.$set(t.form,"group",e)},expression:"form.group"}},t._l(t.groupList,function(e){return n("el-option",{key:e,attrs:{value:e}},[t._v(t._s(e))])}))],1),n("el-form-item",{attrs:{label:"姓名",prop:"name"}},[n("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"手機",prop:"phone"}},[n("el-input",{attrs:{type:"number"},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",loading:t.sending},on:{click:function(e){t.submitForm("form")}}},[t._v("報名")]),n("el-button",{attrs:{disabled:t.sending},on:{click:function(e){t.resetForm("form")}}},[t._v("重置")])],1)],1)],1)},p=[],f=(n("f3/d"),n("LvDl")),g="/api/",d="".concat(g,"GetSUBInfo.aspx"),m="".concat(g,"GetGroupItem.aspx"),h="".concat(g,"AddSubSign.aspx"),v={data:function(){return{form:{gcroup:"",group:"",name:"",phone:""},rules:{gcroup:[{required:!0,message:"請選擇組別",trigger:"change"}],group:[{required:!0,message:"請選擇小組",trigger:"change"}],name:[{required:!0,message:"請輸入名字",trigger:"blur"}],phone:[{required:!0,message:"請輸入手機",trigger:"blur"},{validator:function(t,e,n){var s=/^[09]{2}[0-9]{8}$/;s.test(e)?n():n(new Error("請輸入正確手機格式"))},trigger:"blur"}]},sending:!1}},props:{subInfo:{type:Object,required:!0},groupData:{type:Array,required:!0}},computed:{groupList:function(){var t=Object(f["find"])(this.groupData,{group:this.form.gcroup});return Object(f["get"])(t,"list",[])}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;var n=e;e.sending=!0,i.a.post(h,{SID:e.subInfo.sid,CategoryID:e.subInfo.categoryID,gcroup:e.form.gcroup,group:e.form.group,Ename:e.form.name,Phone:e.form.phone,Gmail:"",Church:""}).then(function(t){n.sending=!1;var e=t.data,s=e.IsApiError,a=e.ApiMsg;s?n.$message({message:a,type:"error"}):(n.resetForm("form"),n.$emit("onSignSuccess",t.data))}).catch(function(t){n.sending=!1,n.$message({message:"發送發生錯誤，請稍後再試",type:"error"})})})},resetForm:function(t){this.$refs[t].resetFields()},onGcroupChange:function(){this.form.group=""}}},b=v,_=n("KHd+"),I=Object(_["a"])(b,u,p,!1,null,null,null),D=I.exports,C=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-main",[n("div",{staticClass:"class-info alignCenter"},[n("h2",{staticClass:"status-success"},[n("i",{staticClass:"el-icon-success"}),t._v(" "+t._s(t.signData.ApiMsg))]),n("ul",{staticClass:"class-detail inlineBlock alignLeft"},[n("li",[n("span",{staticClass:"class-detail-title"},[t._v("組別：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.gcroup))])]),n("li",[n("span",{staticClass:"class-detail-title"},[t._v("小組：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.group))])]),n("li",[n("span",{staticClass:"class-detail-title"},[t._v("姓名：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.Ename))])]),n("li",[n("span",{staticClass:"class-detail-title"},[t._v("手機：")]),n("span",{staticClass:"class-detail-text"},[t._v(t._s(t.signData.Phone))])])]),n("br"),n("br"),n("el-button",{attrs:{icon:"el-icon-refresh"},on:{click:function(e){t.$emit("reSignUp")}}},[t._v("重新報名")]),n("br"),n("br")],1)])},w=[],y={props:{signData:{type:Object,required:!0}}},x=y,S=Object(_["a"])(x,C,w,!1,null,null,null),k=S.exports,$={name:"app",data:function(){return{showBlock:"form",className:"",subInfo:{condition:"",date:"",endDate:"",location:"",name:"",categoryID:""},signData:null,groupData:[],getSubInfoLoading:!0,getGroupItemLoading:!0}},components:{registrationForm:D,signInfo:k},computed:{pageLoading:function(){return this.getSubInfoLoading||this.getGroupItemLoading}},methods:{showWarning:function(t){this.$alert(t,{type:"error",showClose:!1,showConfirmButton:!1,center:!0})},onSignSuccess:function(t){this.signData=t,this.showBlock="signInfo"},reSignUp:function(){this.signData=null,this.showBlock="form"}},created:function(){var t=this,e=c.a.parse(window.location.search),n=e.id;n?(i.a.post(d,{CategoryID:n.toUpperCase()}).then(function(e){var n=e.data,s=n.SUCondition,a=n.SubDate,o=n.SubEndDate,r=n.SubLocation,i=n.IsApiError,l=n.ApiMsg,c=n.SubName,u=n.CategoryID,p=n.SID;i?t.showWarning(l):(t.className=c.split("生命建造程序 ")[1],t.subInfo.condition=s,t.subInfo.date=a,t.subInfo.endDate=o,t.subInfo.location=r,t.subInfo.categoryID=u,t.subInfo.sid=p,t.getSubInfoLoading=!1)}).catch(function(e){t.showWarning("很抱歉！我們的服務發生了問題")}),i.a.get(m).then(function(e){t.groupData=e.data.DataInfo,t.getGroupItemLoading=!1}).catch(function(e){t.showWarning("很抱歉！我們的服務發生了問題")})):this.showWarning("查無課程資訊")}},O=$,L=Object(_["a"])(O,a,o,!1,null,null,null),j=L.exports,E=n("XJYT"),G=n.n(E),F=n("yHtJ"),q=n.n(F);n("D66Q"),n("eKdF");s["default"].use(G.a,{locale:q.a}),s["default"].config.productionTip=!1,new s["default"]({render:function(t){return t(j)}}).$mount("#app")},eKdF:function(t,e,n){}});
//# sourceMappingURL=app.28820045.js.map